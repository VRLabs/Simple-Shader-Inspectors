<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Customizing The Texture Generator | Simple Shader Inspectors Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Customizing The Texture Generator | Simple Shader Inspectors Documentation ">
    <meta name="generator" content="docfx 2.58.2.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="png" src="../../../logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="idev-CustomTextureGenerator">
<h1 id="customizing-the-texture-generator">Customizing The Texture Generator</h1>

<p>The <code>TextureGeneratorControl</code> is a really particular control, not only it is a good example of the level of complexity that a single control can reach in terms of functionality, but it is also an example of how is possible to make controls driven mainly by data and therefore customizable for the specific need.</p>
<p>For example if there's a need to take a color mask and apply a specific color for each channel, we can just make a shader that does that and give it to the texture generator.</p>
<p>But <em>what</em> do you need to do in order to accomplish that?</p>
<h2 id="creating-the-shader">Creating the shader</h2>
<p>First of all, you need the shader that does what you want.</p>
<p>We won't go too much into the details on how a shader works here since there are better guides elsewhere for that, but we will run down the main things that are important to get the shader to work in our context.</p>
<p>First of all, create the shader and call it however you want, in our case we call it <code>maskColorizer</code>.</p>
<p>Then just paste this code:</p>
<pre><code class="lang-glsl" name="Main">Shader &quot;Hidden/VRLabs/GeneratorShaders/MaskColorizer&quot;
{
    Properties
    {
        _MainTex (&quot;Mask&quot;, 2D) = &quot;white&quot; {}
    }
    SubShader
    {
        Lighting Off
        Blend One Zero

        Pass
        {
            CGPROGRAM

            #include &quot;UnityCustomRenderTexture.cginc&quot;
            #pragma vertex CustomRenderTextureVertexShader
            #pragma fragment frag
            #pragma target 3.0

            UNITY_DECLARE_TEX2D(_MainTex);
            float4 _MainTex_ST;
            fixed4 frag (v2f_customrendertexture  i) : SV_Target
            {
                return float4(0,0,0,0);
            }
            ENDCG
        }
    }
</code></pre>
<p>This code template is used for the shader to work with the texture generator, since it has to render to a Custom Render Texture.</p>
<div class="NOTE">
<h5>Note</h5>
<p>To avoid to clutter up the shader selector in a material, we start the shader path with <code>Hidden/</code>, since the shader is not meant to be used for materials anyways.</p>
</div>
<div class="NOTE">
<h5>Note</h5>
<p>for more informations on the basics for a shader for Custom Render Textures, check the official <a href="https://docs.unity3d.com/Manual/class-CustomRenderTexture.html">Unity docs</a>.</p>
</div>
<p>From here, you can implement whatever logic you want to make the shader output whatever you want from the properties you pass as inputs.</p>
<pre><code class="lang-glsl" name="Main">Shader &quot;Hidden/VRLabs/GeneratorShaders/MaskColorizer&quot;
{
    Properties
    {
        _MainTex (&quot;Mask&quot;, 2D) = &quot;white&quot; {}
        
        _BaseColor(&quot;Base Color&quot;, Color) = (1, 1, 1, 1)
        _RedColor(&quot;Red Channel Color&quot;, Color) = (1, 1, 1, 1)
        _GreenColor(&quot;Green Channel Color&quot;, Color) = (1, 1, 1, 1)
        _BlueColor(&quot;Blue Channel Color&quot;, Color) = (1, 1, 1, 1)
        _AlphaColor(&quot;Alpha Channel Color&quot;, Color) = (1, 1, 1, 1)
    }
    SubShader
    {
        Lighting Off
        Blend One Zero

        Pass
        {
            CGPROGRAM

            #include &quot;UnityCustomRenderTexture.cginc&quot;
            #pragma vertex CustomRenderTextureVertexShader
            #pragma fragment frag
            #pragma target 3.0

            UNITY_DECLARE_TEX2D(_MainTex);
            float4 _MainTex_ST;

            float4 _BaseColor, _RedColor, _GreenColor, _BlueColor, _AlphaColor;

            fixed4 frag (v2f_customrendertexture  i) : SV_Target
            {
                float4 mask = UNITY_SAMPLE_TEX2D(_MainTex, i.localTexcoord.xy);
                float4 rgba = _BaseColor;
                rgba = lerp(rgba, _RedColor, mask.r);
                rgba = lerp(rgba, _GreenColor, mask.g);
                rgba = lerp(rgba, _BlueColor, mask.b);
                rgba = lerp(rgba, _AlphaColor, mask.a);
                
                return rgba;
            }
            ENDCG
        }
    }
</code></pre><h2 id="creating-the-inspector-for-the-generator-shader">Creating the inspector for the generator shader</h2>
<p>Now that we have a shader, we can tell the generator to use this shader, and the generator will show a default inspector for the shader. But we can do better than that.</p>
<p>The generator is smart enough to detect if the shader uses a custom <code>ShaderGUI</code> (it won't detect if it uses a custom <code>MaterialEditor</code> and will revert back to a default inspector in that case) and use said ShaderGUI to show up the properties.</p>
<p>This means that you can customize the editor to whatever you want by just making a custom inspector.
The library also provides a special type of inspector called <code>TextureGeneratorShaderInspector</code> to inherit from for texture generators, which will let the generator to pass on localization from the main shader inspector to the generator's shader inspector, making the localization of the generator shader dependent on the shader it's used from.</p>
<pre><code class="lang-cs" name="Main">using VRLabs.SimpleShaderInspectors;
using VRLabs.SimpleShaderInspectors.Controls;

namespace VRLabs.Examples
{
    public class MaskColorizerInspector : TextureGeneratorShaderInspector
    {
        protected override void Start()
        {
            this.AddTextureControl(&quot;_MainTex&quot;).WithAlias(&quot;Colorizer_Mask&quot;);
            this.AddSpaceControl(10);
            
            this.AddColorControl(&quot;_BaseColor&quot;).WithAlias(&quot;Colorizer_BaseColor&quot;);
            this.AddColorControl(&quot;_RedColor&quot;).WithAlias(&quot;Colorizer_RedColor&quot;);
            this.AddColorControl(&quot;_GreenColor&quot;).WithAlias(&quot;Colorizer_GreenColor&quot;);
            this.AddColorControl(&quot;_BlueColor&quot;).WithAlias(&quot;Colorizer_BlueColor&quot;);
            this.AddColorControl(&quot;_AlphaColor&quot;).WithAlias(&quot;Colorizer_AlphaColor&quot;);
        }
    }
}
</code></pre>
<p>Now just add <code>CustomEditor &quot;VRLabs.Examples.MaskColorizerInspector&quot;</code> to the shader, with that the generator will use the custom inspector.</p>
<h2 id="using-the-custom-generator">Using the custom generator</h2>
<p>Now that we have both the shader and the inspector we can use the shader on our <code>TextureGeneratorControl</code>.</p>
<p>The easiest way is to put the shader and inside an <code>Editor/Resources</code> folder, so what we can easily load them using <code>Resources.Load</code>, but you can use whatever method you want to load it.</p>
<p>In this example the file will be inside a <code>Editor/Resources/Shader</code> folder.</p>
<pre><code class="lang-csharp" name="Main">// inside the inspector
Shader shader = Resources.Load&lt;Shader&gt;(&quot;Shader/maskColorizer&quot;);
this.AddTextureGeneratorControl(shader, &quot;_TextureProperty&quot;);
</code></pre>
<p>And now the generator is ready to go and be used, give it a try!</p>
<p>Now this was a fairly simple example of a shader, but you can go with much <em>much</em> more complex shaders to do more advanced stuff.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright © VRLabs.<br>Generated by <strong>DocFX</strong></span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
